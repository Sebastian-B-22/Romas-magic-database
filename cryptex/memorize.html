<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memorize Ciphers - The Cryptex</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e8e8e8;
            min-height: 100vh;
        }

        header {
            background: rgba(0,0,0,0.4);
            padding: 1.5rem;
            text-align: center;
            border-bottom: 2px solid #e94560;
        }

        .logo { font-size: 2rem; font-weight: 900; color: #e94560; }
        .tagline { color: #888; margin-top: 0.3rem; }

        main {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        .back-link {
            display: inline-block;
            color: #e94560;
            text-decoration: none;
            margin-bottom: 1.5rem;
        }

        .setup {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid rgba(233,69,96,0.3);
        }

        .setup h2 {
            color: #e94560;
            margin-bottom: 1rem;
        }

        .cipher-select {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 0.6rem;
            margin-bottom: 1rem;
        }

        .cipher-opt {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.6rem;
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s;
        }

        .cipher-opt:hover { background: rgba(233,69,96,0.2); }
        .cipher-opt.selected { border-color: #10b981; background: rgba(16,185,129,0.2); }
        .cipher-opt input { display: none; }
        .cipher-opt .check { color: #10b981; font-weight: bold; }

        .btn {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .btn-primary { background: linear-gradient(135deg, #e94560, #c73659); color: white; }
        .btn-secondary { background: rgba(255,255,255,0.1); color: #ccc; }
        .btn:hover { transform: scale(1.02); }

        /* Quiz Area */
        .quiz-area {
            display: none;
        }

        .quiz-area.active { display: block; }

        .progress {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .progress-text { color: #888; }
        .progress-bar {
            flex: 1;
            height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            overflow: hidden;
            min-width: 100px;
        }
        .progress-fill {
            height: 100%;
            background: #10b981;
            transition: width 0.3s;
        }

        .score { color: #10b981; font-weight: 700; }

        /* The Quiz Card */
        .quiz-card {
            background: rgba(255,255,255,0.05);
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            border: 2px solid rgba(233,69,96,0.3);
        }

        .cipher-label {
            color: #888;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .cipher-name {
            color: #e94560;
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
        }

        .encoded-text {
            background: #0a0a15;
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 1rem;
        }

        .encoded {
            font-family: 'Courier New', monospace;
            font-size: 2rem;
            color: #7dd3fc;
            font-weight: bold;
            word-break: break-all;
        }

        .equals {
            font-size: 2rem;
            color: #e94560;
            margin: 1rem 0;
        }

        .answer-blank {
            font-size: 2.5rem;
            color: #f59e0b;
            font-weight: bold;
            letter-spacing: 0.3rem;
        }

        .hint-text {
            color: #666;
            font-size: 0.9rem;
            margin-top: 1rem;
            font-style: italic;
        }

        /* Answer reveal */
        .answer-section {
            margin-top: 1.5rem;
            display: none;
        }

        .answer-section.revealed { display: block; }

        .answer-box {
            background: rgba(16,185,129,0.2);
            border: 2px solid #10b981;
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }

        .answer-label {
            color: #10b981;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .answer-word {
            font-size: 2.5rem;
            color: #10b981;
            font-weight: bold;
        }

        .card-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 1.5rem;
        }

        .card-btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
        }

        .btn-reveal { background: #f59e0b; color: white; }
        .btn-know { background: #10b981; color: white; }
        .btn-learning { background: #ef4444; color: white; }
        .btn-next { background: #3b82f6; color: white; }

        /* Results */
        .results {
            display: none;
            text-align: center;
            padding: 3rem;
            background: rgba(255,255,255,0.05);
            border-radius: 20px;
        }

        .results.active { display: block; }
        .results h2 { color: #10b981; font-size: 2rem; margin-bottom: 1rem; }
        .results .emoji { font-size: 5rem; margin-bottom: 1rem; }
        .results p { color: #888; margin-bottom: 1.5rem; }
        .results .stats {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 2rem;
        }
        .results .stat { text-align: center; }
        .results .stat-num { font-size: 2.5rem; font-weight: 700; color: #e94560; }
        .results .stat-label { color: #888; }
    </style>
</head>
<body>

<header>
    <div class="logo">üß† Memorize Mode</div>
    <p class="tagline">Can you decode these?</p>
</header>

<main>
    <a href="index.html" class="back-link">‚Üê Back to The Cryptex</a>

    <!-- Setup -->
    <div class="setup" id="setup">
        <h2>üìã Pick Ciphers to Practice</h2>
        <div class="cipher-select" id="cipherSelect"></div>
        <button class="btn btn-secondary" onclick="selectAll()">Select All</button>
        <button class="btn btn-secondary" onclick="selectNone()">Clear</button>
        <button class="btn btn-primary" onclick="startQuiz()">üöÄ Start Quiz!</button>
    </div>

    <!-- Quiz Area -->
    <div class="quiz-area" id="quizArea">
        <div class="progress">
            <span class="progress-text"><span id="current">1</span> / <span id="total">10</span></span>
            <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
            <span class="score">‚úÖ <span id="score">0</span></span>
        </div>

        <div class="quiz-card" id="quizCard">
            <div class="cipher-label">Decode this:</div>
            <div class="cipher-name" id="cipherName">üèõÔ∏è Caesar Cipher (+1)</div>
            
            <div class="encoded-text">
                <div class="encoded" id="encodedText">IFMMP</div>
            </div>
            
            <div class="equals">=</div>
            <div class="answer-blank" id="answerBlank">_ _ _ _ _</div>
            <div class="hint-text" id="hintText">Think about how this cipher works...</div>

            <div class="answer-section" id="answerSection">
                <div class="answer-box">
                    <div class="answer-label">‚úÖ Answer:</div>
                    <div class="answer-word" id="answerWord">HELLO</div>
                </div>
            </div>

            <div class="card-buttons">
                <button class="card-btn btn-reveal" id="revealBtn" onclick="revealAnswer()">üëÄ Show Answer</button>
                <button class="card-btn btn-know" id="knowBtn" onclick="markCard('know')" style="display:none;">‚úÖ Got It!</button>
                <button class="card-btn btn-learning" id="learningBtn" onclick="markCard('learning')" style="display:none;">‚ùå Missed It</button>
            </div>
        </div>
    </div>

    <!-- Results -->
    <div class="results" id="results">
        <div class="emoji">üéâ</div>
        <h2>Quiz Complete!</h2>
        <div class="stats">
            <div class="stat">
                <div class="stat-num" id="knownCount">0</div>
                <div class="stat-label">Correct</div>
            </div>
            <div class="stat">
                <div class="stat-num" id="learningCount">0</div>
                <div class="stat-label">Missed</div>
            </div>
        </div>
        <p id="resultMessage">Keep practicing!</p>
        <button class="btn btn-primary" onclick="restart()">üîÑ Try Again</button>
        <button class="btn btn-secondary" onclick="backToSetup()">üìã Change Ciphers</button>
    </div>
</main>

<script>
// Quiz questions - encoded = ?, answer = decoded word
const quizData = [
    // Caesar +1
    { cipher: 'üèõÔ∏è Caesar (+1)', encoded: 'IFMMP', answer: 'HELLO', hint: 'Shift each letter back by 1', blanks: '_ _ _ _ _' },
    { cipher: 'üèõÔ∏è Caesar (+1)', encoded: 'CZF', answer: 'BYE', hint: 'Shift each letter back by 1', blanks: '_ _ _' },
    { cipher: 'üèõÔ∏è Caesar (+1)', encoded: 'DBU', answer: 'CAT', hint: 'Shift each letter back by 1', blanks: '_ _ _' },
    { cipher: 'üèõÔ∏è Caesar (+1)', encoded: 'EPH', answer: 'DOG', hint: 'Shift each letter back by 1', blanks: '_ _ _' },
    { cipher: 'üèõÔ∏è Caesar (+1)', encoded: 'TFDSFUT', answer: 'SECRETS', hint: 'Shift each letter back by 1', blanks: '_ _ _ _ _ _ _' },
    
    // Caesar +3
    { cipher: 'üèõÔ∏è Caesar (+3)', encoded: 'KHOOR', answer: 'HELLO', hint: 'Shift each letter back by 3', blanks: '_ _ _ _ _' },
    { cipher: 'üèõÔ∏è Caesar (+3)', encoded: 'FDW', answer: 'CAT', hint: 'Shift each letter back by 3', blanks: '_ _ _' },
    { cipher: 'üèõÔ∏è Caesar (+3)', encoded: 'BRH', answer: 'BYE', hint: 'Shift each letter back by 3 (wrap around!)', blanks: '_ _ _' },
    
    // ROT13
    { cipher: 'üîÅ ROT13', encoded: 'URYYB', answer: 'HELLO', hint: 'Shift by 13 (halfway through alphabet)', blanks: '_ _ _ _ _' },
    { cipher: 'üîÅ ROT13', encoded: 'FRPERG', answer: 'SECRET', hint: 'Shift by 13 - or use ROT13 again!', blanks: '_ _ _ _ _ _' },
    { cipher: 'üîÅ ROT13', encoded: 'PNG', answer: 'CAT', hint: 'Shift by 13', blanks: '_ _ _' },
    
    // Atbash
    { cipher: 'üîÑ Atbash', encoded: 'SVOOL', answer: 'HELLO', hint: 'A‚ÜîZ, B‚ÜîY, C‚ÜîX...', blanks: '_ _ _ _ _' },
    { cipher: 'üîÑ Atbash', encoded: 'YBV', answer: 'BYE', hint: 'Flip the alphabet!', blanks: '_ _ _' },
    { cipher: 'üîÑ Atbash', encoded: 'WLT', answer: 'DOG', hint: 'A‚ÜîZ, B‚ÜîY, C‚ÜîX...', blanks: '_ _ _' },
    
    // A1Z26
    { cipher: 'üî¢ A1Z26', encoded: '8-5-12-12-15', answer: 'HELLO', hint: 'A=1, B=2, C=3...', blanks: '_ _ _ _ _' },
    { cipher: 'üî¢ A1Z26', encoded: '3-1-20', answer: 'CAT', hint: 'Numbers = letter positions', blanks: '_ _ _' },
    { cipher: 'üî¢ A1Z26', encoded: '2-25-5', answer: 'BYE', hint: 'A=1, B=2... Y=25', blanks: '_ _ _' },
    { cipher: 'üî¢ A1Z26', encoded: '19-16-25', answer: 'SPY', hint: 'Count the alphabet!', blanks: '_ _ _' },
    
    // Backwards
    { cipher: 'üîÄ Backwards', encoded: 'OLLEH', answer: 'HELLO', hint: 'Read it backwards!', blanks: '_ _ _ _ _' },
    { cipher: 'üîÄ Backwards', encoded: 'TERCES', answer: 'SECRET', hint: 'Reverse the letters!', blanks: '_ _ _ _ _ _' },
    { cipher: 'üîÄ Backwards', encoded: 'YPS', answer: 'SPY', hint: 'Flip it around!', blanks: '_ _ _' },
    
    // Leet
    { cipher: 'üí¨ Leet Speak', encoded: 'H3LL0', answer: 'HELLO', hint: '3=E, 0=O', blanks: '_ _ _ _ _' },
    { cipher: 'üí¨ Leet Speak', encoded: 'H4CK3R', answer: 'HACKER', hint: '4=A, 3=E', blanks: '_ _ _ _ _ _' },
    { cipher: 'üí¨ Leet Speak', encoded: 'C00L', answer: 'COOL', hint: '0=O', blanks: '_ _ _ _' },
    { cipher: 'üí¨ Leet Speak', encoded: '1337', answer: 'LEET', hint: '1=L, 3=E, 7=T', blanks: '_ _ _ _' },
    
    // Morse
    { cipher: 'üì° Morse Code', encoded: '‚Ä¢‚Ä¢‚Ä¢ ‚àí‚àí‚àí ‚Ä¢‚Ä¢‚Ä¢', answer: 'SOS', hint: 'S=‚Ä¢‚Ä¢‚Ä¢ O=‚àí‚àí‚àí', blanks: '_ _ _' },
    { cipher: 'üì° Morse Code', encoded: '‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢', answer: 'HI', hint: 'H=‚Ä¢‚Ä¢‚Ä¢‚Ä¢ I=‚Ä¢‚Ä¢', blanks: '_ _' },
    { cipher: 'üì° Morse Code', encoded: '‚àí‚àí‚àí ‚Ä¢‚àí‚Ä¢', answer: 'OK', hint: 'Look up Morse chart!', blanks: '_ _' },
    
    // Binary
    { cipher: 'üíª Binary', encoded: '01001000 01001001', answer: 'HI', hint: '8 digits = 1 letter', blanks: '_ _' },
    
    // Phone
    { cipher: 'üì± Phone Keypad', encoded: '44-33-555-555-666', answer: 'HELLO', hint: 'Count the digits! 44=H (4 twice)', blanks: '_ _ _ _ _' },
    { cipher: 'üì± Phone Keypad', encoded: '222-2-8', answer: 'CAT', hint: '222=C, 2=A, 8=T', blanks: '_ _ _' },
];

let selectedCiphers = [];
let currentQuestions = [];
let currentIndex = 0;
let knownCount = 0;
let learningCount = 0;

// Get unique cipher types from quizData
const cipherTypes = [...new Set(quizData.map(q => q.cipher))];

function populateSelect() {
    const container = document.getElementById('cipherSelect');
    container.innerHTML = cipherTypes.map(c => `
        <div class="cipher-opt selected" onclick="toggleSelect('${c}')">
            <input type="checkbox" id="sel-${c.replace(/[^a-z0-9]/gi, '')}" checked>
            <span class="check">‚úì</span>
            <span>${c}</span>
        </div>
    `).join('');
}

function toggleSelect(cipher) {
    const id = cipher.replace(/[^a-z0-9]/gi, '');
    const opt = document.querySelector(`#sel-${id}`).parentElement;
    const cb = document.querySelector(`#sel-${id}`);
    cb.checked = !cb.checked;
    opt.classList.toggle('selected', cb.checked);
}

function selectAll() {
    document.querySelectorAll('.cipher-opt').forEach(opt => {
        opt.classList.add('selected');
        opt.querySelector('input').checked = true;
    });
}

function selectNone() {
    document.querySelectorAll('.cipher-opt').forEach(opt => {
        opt.classList.remove('selected');
        opt.querySelector('input').checked = false;
    });
}

function startQuiz() {
    selectedCiphers = [];
    document.querySelectorAll('.cipher-opt input:checked').forEach(cb => {
        const label = cb.parentElement.querySelector('span:last-child').textContent;
        selectedCiphers.push(label);
    });

    if (selectedCiphers.length === 0) {
        alert('Pick at least one cipher!');
        return;
    }

    // Filter questions for selected ciphers
    currentQuestions = quizData.filter(q => selectedCiphers.includes(q.cipher));
    
    // Shuffle
    currentQuestions = currentQuestions.sort(() => Math.random() - 0.5);
    
    // Limit to 10 questions max
    currentQuestions = currentQuestions.slice(0, 10);
    
    currentIndex = 0;
    knownCount = 0;
    learningCount = 0;

    document.getElementById('setup').style.display = 'none';
    document.getElementById('quizArea').classList.add('active');
    document.getElementById('results').classList.remove('active');

    document.getElementById('total').textContent = currentQuestions.length;
    document.getElementById('score').textContent = 0;
    
    showQuestion();
}

function showQuestion() {
    if (currentIndex >= currentQuestions.length) {
        showResults();
        return;
    }

    const q = currentQuestions[currentIndex];
    document.getElementById('cipherName').textContent = q.cipher;
    document.getElementById('encodedText').textContent = q.encoded;
    document.getElementById('answerBlank').textContent = q.blanks;
    document.getElementById('hintText').textContent = q.hint;
    document.getElementById('answerWord').textContent = q.answer;
    
    // Reset state
    document.getElementById('answerSection').classList.remove('revealed');
    document.getElementById('revealBtn').style.display = 'inline-block';
    document.getElementById('knowBtn').style.display = 'none';
    document.getElementById('learningBtn').style.display = 'none';
    
    document.getElementById('current').textContent = currentIndex + 1;
    document.getElementById('progressFill').style.width = ((currentIndex / currentQuestions.length) * 100) + '%';
}

function revealAnswer() {
    document.getElementById('answerSection').classList.add('revealed');
    document.getElementById('revealBtn').style.display = 'none';
    document.getElementById('knowBtn').style.display = 'inline-block';
    document.getElementById('learningBtn').style.display = 'inline-block';
}

function markCard(status) {
    if (status === 'know') {
        knownCount++;
        document.getElementById('score').textContent = knownCount;
    } else {
        learningCount++;
    }
    
    currentIndex++;
    showQuestion();
}

function showResults() {
    document.getElementById('quizArea').classList.remove('active');
    document.getElementById('results').classList.add('active');
    
    document.getElementById('knownCount').textContent = knownCount;
    document.getElementById('learningCount').textContent = learningCount;
    
    const percent = Math.round((knownCount / currentQuestions.length) * 100);
    let message = '';
    let emoji = 'üéâ';
    
    if (percent === 100) {
        message = 'PERFECT! You\'re a cipher master! üèÜ';
        emoji = 'üèÜ';
    } else if (percent >= 80) {
        message = 'Amazing! Almost perfect! üåü';
        emoji = 'üåü';
    } else if (percent >= 60) {
        message = 'Great job! Keep practicing! üí™';
        emoji = 'üí™';
    } else if (percent >= 40) {
        message = 'Good effort! Practice more! üìö';
        emoji = 'üìö';
    } else {
        message = 'Keep learning! You\'ll get it! üîê';
        emoji = 'üîê';
    }
    
    document.getElementById('resultMessage').textContent = message;
    document.querySelector('.results .emoji').textContent = emoji;
}

function restart() {
    currentQuestions = currentQuestions.sort(() => Math.random() - 0.5);
    currentIndex = 0;
    knownCount = 0;
    learningCount = 0;
    
    document.getElementById('results').classList.remove('active');
    document.getElementById('quizArea').classList.add('active');
    document.getElementById('score').textContent = 0;
    
    showQuestion();
}

function backToSetup() {
    document.getElementById('results').classList.remove('active');
    document.getElementById('quizArea').classList.remove('active');
    document.getElementById('setup').style.display = 'block';
}

// Initialize
populateSelect();
</script>

</body>
</html>