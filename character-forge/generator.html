<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generator - Character Forge</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', sans-serif;
            background: #f9fafb;
            color: #1a1a1a;
            line-height: 1.6;
        }

        /* Login Screen */
        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .login-box {
            background: white;
            padding: 3rem;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            text-align: center;
            max-width: 400px;
            width: 90%;
        }

        .login-box h2 {
            font-size: 2rem;
            color: #667eea;
            margin-bottom: 1rem;
        }

        .login-box p {
            color: #6b7280;
            margin-bottom: 2rem;
        }

        .login-box input {
            width: 100%;
            padding: 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 1rem;
            margin-bottom: 1rem;
        }

        .login-box input:focus {
            outline: none;
            border-color: #667eea;
        }

        .login-btn {
            width: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 1rem;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }

        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .error-msg {
            color: #ef4444;
            font-size: 0.9rem;
            margin-top: 0.5rem;
            display: none;
        }

        .login-overlay.hidden {
            display: none;
        }

        /* Header */
        header {
            background: white;
            padding: 1rem 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        nav {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.3rem;
            font-weight: 700;
            color: #667eea;
            text-decoration: none;
        }

        .nav-right {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .saved-btn {
            background: #667eea;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.2s;
        }

        .saved-btn:hover {
            background: #5568d3;
        }

        .premium-badge {
            background: linear-gradient(135deg, #ffd700 0%, #f59e0b 100%);
            color: #1a1a1a;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.9rem;
        }

        .usage-counter {
            font-size: 0.9rem;
            color: #6b7280;
            margin-right: 1rem;
        }

        .usage-counter.warning {
            color: #ef4444;
            font-weight: 700;
        }

        .upgrade-link {
            background: #667eea;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .upgrade-link:hover {
            background: #5568d3;
        }

        .limit-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .limit-modal.active {
            display: flex;
        }

        .limit-box {
            background: white;
            padding: 3rem;
            border-radius: 20px;
            text-align: center;
            max-width: 400px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .limit-box h2 {
            font-size: 2rem;
            color: #ef4444;
            margin-bottom: 1rem;
        }

        .limit-box p {
            color: #6b7280;
            margin-bottom: 2rem;
        }

        /* Main Layout */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            display: grid;
            grid-template-columns: 320px 1fr;
            gap: 2rem;
            min-height: calc(100vh - 80px);
        }

        /* Sidebar */
        .sidebar {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 2px 12px rgba(0,0,0,0.06);
            height: fit-content;
            position: sticky;
            top: 100px;
        }

        .sidebar h2 {
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            color: #1a1a1a;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #4a5568;
            font-size: 0.9rem;
        }

        select, input[type="text"], textarea {
            width: 100%;
            padding: 0.7rem;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 0.95rem;
            transition: border-color 0.2s;
            background: white;
            font-family: inherit;
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        select:focus, input[type="text"]:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .checkbox-group input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .checkbox-group label {
            margin-bottom: 0;
            cursor: pointer;
            font-weight: 500;
        }

        .age-range-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.8rem;
        }

        .age-range-inputs input {
            padding: 0.6rem;
            text-align: center;
        }

        .age-range-display {
            text-align: center;
            color: #667eea;
            font-weight: 600;
            margin-top: 0.5rem;
            font-size: 0.95rem;
        }

        .vibe-slider {
            width: 100%;
            margin-top: 0.5rem;
        }

        .vibe-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: #6b7280;
            margin-top: 0.3rem;
        }

        .generate-btn {
            width: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 1rem;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            margin-top: 1.5rem;
            transition: all 0.3s;
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        /* Results Area */
        .results {
            background: white;
            border-radius: 16px;
            padding: 3rem;
            box-shadow: 0 2px 12px rgba(0,0,0,0.06);
            min-height: 500px;
        }

        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: #6b7280;
        }

        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .empty-state h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: #4a5568;
        }

        /* Character Result */
        .character-result {
            display: none;
        }

        .character-result.active {
            display: block;
            animation: fadeIn 0.4s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .character-header {
            text-align: center;
            padding-bottom: 2rem;
            border-bottom: 2px solid #f0f0f0;
            margin-bottom: 2rem;
        }

        .character-header h1 {
            font-size: 2.5rem;
            color: #667eea;
            margin-bottom: 0.5rem;
        }

        .character-subtitle {
            font-size: 1.2rem;
            color: #6b7280;
            font-style: italic;
        }

        .character-section {
            margin-bottom: 2.5rem;
        }

        .character-section h3 {
            font-size: 1.3rem;
            color: #1a1a1a;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .section-icon {
            font-size: 1.5rem;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .info-item {
            background: #f9fafb;
            padding: 1rem;
            border-radius: 8px;
            border-left: 3px solid #667eea;
        }

        .info-label {
            font-size: 0.85rem;
            color: #6b7280;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.3rem;
        }

        .info-value {
            font-size: 1rem;
            color: #1a1a1a;
            font-weight: 500;
        }

        .trait-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.8rem;
        }

        .trait-tag {
            background: #f0f4ff;
            color: #667eea;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .backstory-text {
            background: #f9fafb;
            padding: 1.5rem;
            border-radius: 8px;
            color: #4a5568;
            line-height: 1.8;
            font-size: 1rem;
        }

        .actions {
            display: flex;
            gap: 1rem;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 2px solid #f0f0f0;
        }

        .action-btn {
            flex: 1;
            padding: 1rem;
            border: 2px solid #e5e7eb;
            background: white;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .action-btn:hover {
            border-color: #667eea;
            color: #667eea;
            transform: translateY(-2px);
        }

        .action-btn.primary {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .action-btn.primary:hover {
            background: #5568d3;
        }

        .action-btn.save {
            background: #10b981;
            color: white;
            border-color: #10b981;
        }

        .action-btn.save:hover {
            background: #059669;
        }

        @media (max-width: 1024px) {
            .container {
                grid-template-columns: 1fr;
            }

            .sidebar {
                position: relative;
                top: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Premium Upgrade Screen -->
    <div class="login-overlay" id="loginOverlay" style="display:none;">
        <div class="login-box">
            <h2>üõ°Ô∏è Upgrade to Premium</h2>
            <p>Enter your premium password for unlimited access</p>
            <input type="password" id="passwordInput" placeholder="Enter premium password" onkeypress="if(event.key==='Enter') login()">
            <button class="login-btn" onclick="login()">Unlock Premium</button>
            <div class="error-msg" id="errorMsg">Incorrect password. Try again!</div>
            <p style="font-size: 0.85rem; color: #9ca3af; margin-top: 1.5rem; cursor: pointer;" onclick="document.getElementById('loginOverlay').style.display='none'">‚Üê Back to free version</p>
        </div>
    </div>

    <header>
        <nav>
            <a href="index.html" class="logo">‚ö° Character Forge</a>
            <div class="nav-right">
                <a href="saved.html" class="saved-btn">üíæ Saved Characters</a>
                <span class="usage-counter" id="usageCounter">3/3 free today</span>
                <a class="upgrade-link" id="upgradeBtn" onclick="showUpgradeModal()">‚ú® Go Premium</a>
                <div class="premium-badge" id="premiumBadge" style="display:none;">‚ú® Premium</div>
            </div>
        </nav>
    </header>

    <!-- Daily Limit Modal -->
    <div class="limit-modal" id="limitModal" onclick="if(event.target === this) this.classList.remove('active')">
        <div class="limit-box">
            <h2>‚è∞ Daily Limit Reached</h2>
            <p>You've used all 3 free characters today. Upgrade to Premium for unlimited access!</p>
            <button class="login-btn" onclick="showUpgradeModal(); document.getElementById('limitModal').classList.remove('active')">Upgrade to Premium</button>
            <p style="font-size: 0.85rem; color: #9ca3af; margin-top: 1rem;">Free limit resets at midnight</p>
        </div>
    </div>

    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <h2>Character Settings</h2>
            
            <div class="form-group">
                <label for="storyType">What are you writing?</label>
                <textarea id="storyType" placeholder="e.g., A fantasy novel about a young mage discovering their powers..."></textarea>
            </div>

            <div class="form-group">
                <label for="genre">Genre</label>
                <select id="genre">
                    <option>High Fantasy</option>
                    <option>Urban Fantasy</option>
                    <option>Sci-Fi (Space Opera)</option>
                    <option>Sci-Fi (Cyberpunk)</option>
                    <option>Historical</option>
                    <option>Modern Day</option>
                    <option>Horror</option>
                    <option>Mystery/Thriller</option>
                    <option>Post-Apocalyptic</option>
                </select>
            </div>

            <div class="form-group">
                <label for="role">Character Role</label>
                <select id="role">
                    <option>Protagonist/Hero</option>
                    <option>Antagonist/Villain</option>
                    <option>Sidekick/Companion</option>
                    <option>Mentor</option>
                    <option>Love Interest</option>
                    <option>Anti-Hero</option>
                    <option>Mysterious Stranger</option>
                </select>
            </div>

            <div class="form-group">
                <label>Age Range (Exact)</label>
                <div class="age-range-inputs">
                    <div>
                        <input type="number" id="minAge" value="13" min="1" max="100" onchange="updateAgeDisplay()">
                        <div style="text-align: center; font-size: 0.8rem; color: #6b7280; margin-top: 0.3rem;">Min</div>
                    </div>
                    <div>
                        <input type="number" id="maxAge" value="17" min="1" max="100" onchange="updateAgeDisplay()">
                        <div style="text-align: center; font-size: 0.8rem; color: #6b7280; margin-top: 0.3rem;">Max</div>
                    </div>
                </div>
                <div class="age-range-display" id="ageDisplay">13-17 years old</div>
            </div>

            <div class="form-group">
                <div class="checkbox-group">
                    <input type="checkbox" id="includeNickname">
                    <label for="includeNickname">Include nickname</label>
                </div>
            </div>

            <div class="form-group">
                <label for="vibe">Character Vibe</label>
                <input type="range" id="vibe" class="vibe-slider" min="1" max="5" value="3">
                <div class="vibe-labels">
                    <span>Dark</span>
                    <span>Balanced</span>
                    <span>Light</span>
                </div>
            </div>

            <button class="generate-btn" onclick="generateCharacter()">‚ú® Generate Character</button>
        </aside>

        <!-- Results -->
        <main class="results">
            <div class="empty-state" id="emptyState">
                <div class="empty-state-icon">‚ú®</div>
                <h3>Ready to create magic?</h3>
                <p>Tell us about your story and click Generate to bring your character to life.</p>
            </div>

            <div class="character-result" id="characterResult">
                <!-- Generated content goes here -->
            </div>
        </main>
    </div>

    <script>
        // Password protection - Premium access password
        const PASSWORD = 'Characterforge2026';
        let isPremium = false;
        
        function login() {
            const input = document.getElementById('passwordInput');
            const error = document.getElementById('errorMsg');
            const overlay = document.getElementById('loginOverlay');
            
            if (input.value === PASSWORD) {
                overlay.classList.add('hidden');
                isPremium = true;
                updateUI();
            } else {
                error.style.display = 'block';
                input.value = '';
                input.focus();
            }
        }

        function showUpgradeModal() {
            document.getElementById('loginOverlay').style.display = 'flex';
        }

        // Usage tracking for free users
        function getTodayKey() {
            const today = new Date();
            return `usage_${today.getFullYear()}_${today.getMonth()}_${today.getDate()}`;
        }

        function getUsageCount() {
            if (isPremium) return 0; // Premium = unlimited
            const key = getTodayKey();
            return parseInt(localStorage.getItem(key) || '0');
        }

        function incrementUsage() {
            if (isPremium) return; // Don't track for premium
            const key = getTodayKey();
            const count = getUsageCount();
            localStorage.setItem(key, (count + 1).toString());
            updateUsageDisplay();
        }

        function updateUsageDisplay() {
            const counter = document.getElementById('usageCounter');
            const used = getUsageCount();
            const remaining = Math.max(0, 3 - used);
            
            counter.textContent = `${remaining}/3 free today`;
            
            if (remaining === 0) {
                counter.classList.add('warning');
            } else {
                counter.classList.remove('warning');
            }
        }

        function updateUI() {
            if (isPremium) {
                document.getElementById('usageCounter').style.display = 'none';
                document.getElementById('upgradeBtn').style.display = 'none';
                document.getElementById('premiumBadge').style.display = 'block';
            } else {
                updateUsageDisplay();
            }
        }

        function canGenerate() {
            if (isPremium) return true;
            return getUsageCount() < 3;
        }

        // Initialize on load
        updateUI();

        // Age display update
        function updateAgeDisplay() {
            const min = document.getElementById('minAge').value;
            const max = document.getElementById('maxAge').value;
            document.getElementById('ageDisplay').textContent = `${min}-${max} years old`;
        }

        // Current character (for saving)
        let currentCharacter = null;
        
        // Track last generated names to avoid duplicates
        let lastFirstName = null;
        let lastLastName = null;

        // Character generation data
        const names = {
            fantasy: {
                first: [
                    // Classic Fantasy
                    'Lyra', 'Kael', 'Aria', 'Theron', 'Zara', 'Dorian', 'Elowen', 'Cassius', 'Nova', 'Riven',
                    'Seraphina', 'Alaric', 'Isolde', 'Magnus', 'Celestia', 'Darius', 'Rowena', 'Valerian', 'Elara', 'Thaddeus',
                    'Morgana', 'Lucian', 'Amara', 'Orion', 'Freya', 'Callum', 'Mira', 'Ezra', 'Luna', 'Rowan',
                    'Astrid', 'Draven', 'Ilyana', 'Silas', 'Linnea', 'Torin', 'Maeve', 'Caspian', 'Brynn', 'Kieran',
                    'Nyx', 'Finnian', 'Sable', 'Aldric', 'Evadne', 'Dante', 'Ophelia', 'Garrett', 'Eira', 'Bastian',
                    'Selene', 'Hadrian', 'Rhiannon', 'Lysander', 'Thalia', 'Ronan', 'Calista', 'Alistair', 'Azura', 'Tristan',
                    'Vesper', 'Evander', 'Isadora', 'Cedric', 'Elspeth', 'Leander', 'Cordelia', 'Soren', 'Gwyneth', 'Felix',
                    'Aurora', 'Jasper', 'Liora', 'Nathaniel', 'Octavia', 'Sebastian', 'Vivienne', 'Gideon', 'Rosalind', 'Atticus'
                ],
                last: [
                    'Shadowmend', 'Stormweaver', 'Nightwhisper', 'Ironheart', 'Moonblade', 'Ashborne', 'Silverwing', 'Darkwood', 'Starfall', 'Embercrest',
                    'Blackthorn', 'Stormborn', 'Frostbane', 'Lightbringer', 'Thornheart', 'Ravencroft', 'Wintermere', 'Dawnforge', 'Shadowend', 'Brightflame',
                    'Wolfsbane', 'Cinderhall', 'Moonshadow', 'Flameheart', 'Stonebridge', 'Swiftwind', 'Crystalborne', 'Fireforge', 'Mistwood', 'Goldleaf',
                    'Nightingale', 'Silvermoon', 'Ironwood', 'Stormcrest', 'Bloodmoon', 'Starweaver', 'Thornfield', 'Shadowbrook', 'Winterfall', 'Emberstone',
                    'Darkwater', 'Brightwood', 'Frostwind', 'Flamebane', 'Moonwhisper', 'Stormridge', 'Ashwood', 'Silverblade', 'Ironforge', 'Nightshade',
                    'Ravenwood', 'Crystalmere', 'Dawnbringer', 'Shadowheart', 'Winterstone', 'Emberwing', 'Starlight', 'Thornwood', 'Frostborn', 'Firebloom'
                ]
            },
            scifi: {
                first: [
                    // Diverse Sci-Fi
                    'Marcus', 'Zara', 'Nova', 'Kai', 'Phoenix', 'Echo', 'Atlas', 'Cipher', 'Neo', 'Raven',
                    'Akira', 'Elara', 'Cyrus', 'Sora', 'Orion', 'Luna', 'Jaxon', 'Lyric', 'Vega', 'Axel',
                    'Miko', 'Cade', 'Indira', 'Rafe', 'Zephyr', 'Iris', 'Knox', 'Solara', 'Dante', 'Kira',
                    'Juno', 'Rex', 'Amara', 'Blaze', 'Celeste', 'Drake', 'Ember', 'Fox', 'Haven', 'Jinx',
                    'Storm', 'Sage', 'Titan', 'Vale', 'Winter', 'Xander', 'Yara', 'Zenith', 'Aria', 'Bolt',
                    'Coda', 'Delta', 'Eon', 'Flux', 'Ghost', 'Hex', 'Ion', 'Jet', 'Kex', 'Lux',
                    'Matrix', 'Nexus', 'Omega', 'Pulse', 'Quantum', 'Rift', 'Sync', 'Tech', 'Vector', 'Warp',
                    'Astra', 'Blade', 'Chrome', 'Dax', 'Edge', 'Flare', 'Grid', 'Haze', 'Ivory', 'Jade'
                ],
                last: [
                    'Chen', 'Reyes', 'Torres', 'Kim', 'Santos', 'Cross', 'Steel', 'Nakamura', 'Voss', 'Quinn',
                    'Blackwell', 'Stone', 'Rivera', 'Park', 'Singh', 'Tanaka', 'Novak', 'O\'Brien', 'Petrov', 'Zhao',
                    'Khan', 'Mendoza', 'Yamamoto', 'Kowalski', 'Fernandez', 'Nguyen', 'Rossi', 'Weber', 'Anderson', 'Laurent',
                    'Sato', 'Moreno', 'Werner', 'Silva', 'Ivanov', 'Muller', 'Dubois', 'Lee', 'Gonzalez', 'Watanabe',
                    'Costa', 'Russo', 'Schmidt', 'Patel', 'Ali', 'Rodriguez', 'Cohen', 'Murphy', 'Fischer', 'Wagner',
                    'Atlas', 'Cipher', 'Nexus', 'Vector', 'Volt', 'Zero', 'Quantum', 'Nova', 'Onyx', 'Raze',
                    'Stark', 'Frost', 'Storm', 'Ryder', 'Hunter', 'Knight', 'Drake', 'Wolf', 'Fox', 'Hawk'
                ]
            },
            modern: {
                first: [
                    // Gender-neutral and diverse modern names
                    'Alex', 'Jordan', 'Morgan', 'Riley', 'Casey', 'Taylor', 'Jamie', 'Sam', 'Quinn', 'Avery',
                    'Charlie', 'Dakota', 'Elliot', 'Finley', 'Gray', 'Harper', 'Indigo', 'Jesse', 'Kai', 'Logan',
                    'Max', 'Nico', 'Ocean', 'Parker', 'River', 'Sage', 'Skyler', 'Tatum', 'Winter', 'Wren',
                    // Traditional varied names
                    'Aiden', 'Emma', 'Liam', 'Olivia', 'Noah', 'Ava', 'Ethan', 'Sophia', 'Mason', 'Isabella',
                    'Lucas', 'Mia', 'Oliver', 'Amelia', 'Elijah', 'Harper', 'James', 'Evelyn', 'Benjamin', 'Abigail',
                    'Jackson', 'Emily', 'Sebastian', 'Ella', 'Aiden', 'Madison', 'Carter', 'Scarlett', 'Jayden', 'Grace',
                    'Henry', 'Chloe', 'Owen', 'Lily', 'Dylan', 'Zoey', 'Luke', 'Penelope', 'Gabriel', 'Hannah',
                    'Isaac', 'Nora', 'Caleb', 'Aria', 'Nathan', 'Layla', 'Ryan', 'Addison', 'Wyatt', 'Ellie',
                    'Joshua', 'Stella', 'Andrew', 'Natalie', 'Jack', 'Maya', 'Samuel', 'Elena', 'Leo', 'Lucy'
                ],
                last: [
                    'Anderson', 'Martinez', 'Johnson', 'Lee', 'Williams', 'Garcia', 'Davis', 'Brown', 'Miller', 'Wilson',
                    'Moore', 'Taylor', 'Thomas', 'Jackson', 'White', 'Harris', 'Martin', 'Thompson', 'Robinson', 'Clark',
                    'Rodriguez', 'Lewis', 'Walker', 'Hall', 'Allen', 'Young', 'King', 'Wright', 'Lopez', 'Hill',
                    'Scott', 'Green', 'Adams', 'Baker', 'Nelson', 'Carter', 'Mitchell', 'Perez', 'Roberts', 'Turner',
                    'Phillips', 'Campbell', 'Parker', 'Evans', 'Edwards', 'Collins', 'Stewart', 'Morris', 'Murphy', 'Cook',
                    'Rogers', 'Morgan', 'Peterson', 'Cooper', 'Reed', 'Bailey', 'Bell', 'Gomez', 'Kelly', 'Howard',
                    'Ward', 'Cox', 'Diaz', 'Richardson', 'Wood', 'Watson', 'Brooks', 'Bennett', 'Gray', 'James',
                    'Reyes', 'Cruz', 'Hughes', 'Price', 'Myers', 'Long', 'Foster', 'Sanders', 'Ross', 'Morales',
                    'Powell', 'Sullivan', 'Russell', 'Ortiz', 'Jenkins', 'Gutierrez', 'Perry', 'Butler', 'Barnes', 'Fisher'
                ]
            }
        };

        const nicknames = [
            'Shadow', 'Ghost', 'Spark', 'Ace', 'Red', 'Blue', 'Wolf', 'Fox', 'Raven', 'Phoenix', 'Storm', 'Shade',
            'Ash', 'Blaze', 'Bolt', 'Crow', 'Dagger', 'Echo', 'Falcon', 'Frost', 'Hawk', 'Hunter', 'Ice', 'Jet',
            'Knight', 'Lightning', 'Midnight', 'Night', 'Onyx', 'Phantom', 'Quick', 'Razor', 'Scar', 'Silver', 'Smoke',
            'Steel', 'Swift', 'Thorn', 'Thunder', 'Tiger', 'Viper', 'Whisper', 'Wild', 'Wraith', 'Zero', 'Flame',
            'Jade', 'Star', 'Moon', 'Sun', 'Sky', 'Ocean', 'River', 'Stone', 'Ember', 'Nova'
        ];
        
        const traits = {
            positive: [
                'Brave', 'Loyal', 'Creative', 'Witty', 'Compassionate', 'Determined', 'Clever', 'Curious', 'Protective', 'Charismatic',
                'Honest', 'Kind', 'Patient', 'Generous', 'Confident', 'Humble', 'Wise', 'Empathetic', 'Resilient', 'Resourceful',
                'Adaptable', 'Focused', 'Optimistic', 'Perceptive', 'Strategic', 'Diplomatic', 'Inspiring', 'Reliable', 'Adventurous', 'Analytical',
                'Articulate', 'Assertive', 'Balanced', 'Bold', 'Calm', 'Capable', 'Cheerful', 'Cooperative', 'Courageous', 'Dedicated'
            ],
            negative: [
                'Impulsive', 'Stubborn', 'Sarcastic', 'Self-Doubting', 'Secretive', 'Reckless', 'Cynical', 'Perfectionist', 'Impatient', 'Guarded',
                'Arrogant', 'Jealous', 'Vindictive', 'Naive', 'Controlling', 'Paranoid', 'Obsessive', 'Aloof', 'Manipulative', 'Pessimistic',
                'Temperamental', 'Overconfident', 'Indecisive', 'Judgmental', 'Cold', 'Defensive', 'Distant', 'Evasive', 'Hot-headed', 'Insecure',
                'Passive-aggressive', 'Self-destructive', 'Suspicious', 'Unforgiving', 'Vain', 'Workaholic', 'Anxious', 'Avoidant', 'Cocky', 'Demanding'
            ]
        };

        const desires = [
            'to prove themselves worthy',
            'to protect those who cannot protect themselves',
            'to uncover the truth',
            'to find where they truly belong',
            'to make amends for past mistakes',
            'to be free from their destiny',
            'to master their abilities',
            'to change the world for the better',
            'to earn the respect of their peers',
            'to discover their true purpose',
            'to reunite with someone they lost',
            'to escape their past',
            'to build a legacy',
            'to seek justice for those wronged',
            'to find inner peace',
            'to break free from expectations',
            'to understand their powers',
            'to create something meaningful',
            'to forge their own path',
            'to overcome their limitations',
            'to honor a promise they made',
            'to achieve recognition',
            'to solve an ancient mystery',
            'to protect a sacred secret',
            'to gain true freedom',
            'to master a forbidden art',
            'to unite divided peoples',
            'to prevent a prophecy',
            'to redeem their family name',
            'to find love and acceptance'
        ];

        function random(arr) {
            return arr[Math.floor(Math.random() * arr.length)];
        }

        function generateCharacter() {
            // Check if user can generate
            if (!canGenerate()) {
                document.getElementById('limitModal').classList.add('active');
                return;
            }

            const genre = document.getElementById('genre').value.toLowerCase();
            const role = document.getElementById('role').value;
            const minAge = parseInt(document.getElementById('minAge').value);
            const maxAge = parseInt(document.getElementById('maxAge').value);
            const includeNickname = document.getElementById('includeNickname').checked;
            const storyType = document.getElementById('storyType').value;

            // Pick name set based on genre
            let nameSet = names.modern;
            if (genre.includes('fantasy')) nameSet = names.fantasy;
            else if (genre.includes('sci-fi')) nameSet = names.scifi;

            // Generate first name (avoid repeating)
            let firstName = random(nameSet.first);
            while (firstName === lastFirstName && nameSet.first.length > 1) {
                firstName = random(nameSet.first);
            }
            
            // Generate last name (avoid repeating)
            let lastName = random(nameSet.last);
            while (lastName === lastLastName && nameSet.last.length > 1) {
                lastName = random(nameSet.last);
            }
            
            // Generate nickname (avoid repeating if included)
            let nickname = null;
            if (includeNickname) {
                nickname = random(nicknames);
            }
            
            const fullName = `${firstName} ${lastName}`;
            
            // Store for next generation
            lastFirstName = firstName;
            lastLastName = lastName;

            // Generate age within range
            const ageNum = Math.floor(Math.random() * (maxAge - minAge + 1)) + minAge;

            // Generate traits
            const positiveTraits = [random(traits.positive), random(traits.positive), random(traits.positive)];
            const negativeTraits = [random(traits.negative), random(traits.negative)];
            const allTraits = [...positiveTraits, ...negativeTraits];

            const desire = random(desires);

            // Store current character for saving
            currentCharacter = {
                fullName,
                nickname,
                age: ageNum,
                role,
                genre,
                storyType,
                traits: allTraits,
                positiveTraits,
                negativeTraits,
                desire,
                timestamp: Date.now()
            };

            // Build HTML
            let html = `
                <div class="character-header">
                    <h1>${fullName}</h1>
                    ${nickname ? `<p class="character-subtitle">"${nickname}"</p>` : ''}
                </div>

                <div class="character-section">
                    <h3><span class="section-icon">üìù</span> Basic Info</h3>
                    <div class="info-grid">
                        <div class="info-item">
                            <div class="info-label">Full Name</div>
                            <div class="info-value">${fullName}</div>
                        </div>
                        ${nickname ? `
                        <div class="info-item">
                            <div class="info-label">Nickname</div>
                            <div class="info-value">"${nickname}"</div>
                        </div>
                        ` : ''}
                        <div class="info-item">
                            <div class="info-label">Age</div>
                            <div class="info-value">${ageNum} years old</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Role</div>
                            <div class="info-value">${role}</div>
                        </div>
                    </div>
                </div>

                <div class="character-section">
                    <h3><span class="section-icon">üé≠</span> Personality</h3>
                    <div class="trait-list">
                        ${allTraits.map(t => `<span class="trait-tag">${t}</span>`).join('')}
                    </div>
                </div>

                <div class="character-section">
                    <h3><span class="section-icon">üí™</span> Strengths & Flaws</h3>
                    <div class="info-grid">
                        <div class="info-item">
                            <div class="info-label">Strengths</div>
                            <div class="info-value">${positiveTraits.join(', ')}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Flaws</div>
                            <div class="info-value">${negativeTraits.join(', ')}</div>
                        </div>
                    </div>
                </div>

                <div class="character-section">
                    <h3><span class="section-icon">üìñ</span> Character Hook</h3>
                    <div class="backstory-text">
                        ${firstName} is a ${ageNum}-year-old ${role.toLowerCase()} in your ${genre.toLowerCase()} story${storyType ? ': ' + storyType : ''}. 
                        Known for being ${positiveTraits[0].toLowerCase()} yet ${negativeTraits[0].toLowerCase()}, they navigate their world with 
                        ${positiveTraits[1].toLowerCase()} determination. Their journey is shaped by their need ${desire}.
                    </div>
                </div>

                <div class="character-section">
                    <h3><span class="section-icon">üéØ</span> Greatest Desire</h3>
                    <div class="backstory-text">
                        ${desire.charAt(0).toUpperCase() + desire.slice(1)}
                    </div>
                </div>

                <div class="actions">
                    <button class="action-btn save" onclick="saveCharacter()">üíæ Save Character</button>
                    <button class="action-btn" onclick="copyCharacter()">üìã Copy</button>
                    <button class="action-btn" onclick="window.print()">üì• Print</button>
                    <button class="action-btn primary" onclick="generateCharacter()">üîÑ Generate New</button>
                </div>
            `;

            const emptyState = document.getElementById('emptyState');
            const result = document.getElementById('characterResult');
            
            emptyState.style.display = 'none';
            result.innerHTML = html;
            result.classList.add('active');
            
            // Scroll to top of results
            result.scrollIntoView({ behavior: 'smooth', block: 'start' });
            
            // Increment usage counter (only for free users)
            incrementUsage();
        }

        function saveCharacter() {
            if (!currentCharacter) {
                alert('No character to save!');
                return;
            }

            // Get existing saved characters
            let saved = JSON.parse(localStorage.getItem('savedCharacters') || '[]');
            
            // Add current character
            saved.push(currentCharacter);
            
            // Save back to localStorage
            localStorage.setItem('savedCharacters', JSON.stringify(saved));
            
            alert(`‚úÖ ${currentCharacter.fullName} has been saved!`);
        }

        function copyCharacter() {
            const result = document.getElementById('characterResult');
            const text = result.innerText;
            navigator.clipboard.writeText(text).then(() => {
                alert('Character copied to clipboard!');
            });
        }
    </script>
</body>
</html>
